<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FC Inter Moscow Pro</title>
    <link rel="stylesheet" href="./css/main.css" />
    <meta name="description"
        content="FC Inter Moscow Pro - футбольная команда и тренировки для взрослых в Москве в формате 11х11" />


</head>

<body>
    @@include('blocks/header.html')

    <div class="page_team">
        <div class="container_page_team">
            <div class="tabs">
                <button class="tab active" onclick="showStats('default', event)">Состав</button>
                <button class="tab" onclick="showStats('stats', event)">Статистика</button>
                <button class="tab" onclick="showStats('top_players', event)">Топ игроки</button>
                <a href="result11x11-2025.html" <button id=" btn-results" class="tab"
                    onclick="showStats('result', event)">Результаты</button></a>
            </div>

            <div id="stats-content">
                <div class="stats" id="default-stats">
                    <div class="stat-block best-scorer">
                        <h4>Лучший бомбардир</h4>
                        <h3>Игрок</h3>
                        <p>Голы</p>
                    </div>
                    <div class="stat-block best-assist">
                        <h4>Лучший ассистент</h4>
                        <h3>Максим Волконский</h3>
                        <p>18 передач</p>
                    </div>
                    <div class="stat-block best-goalkeeper">
                        <h4>Сухих матчей</h4>
                        <h3>Дмитрий Ларин</h3>
                        <p>1 матч</p>
                    </div>
                    <div class="stat-block best-combined">
                        <h4>Гол+пас</h4>
                        <h3>Максим Волконский</h3>
                        <p>18 очков</p>
                    </div>
                </div>
            </div>

            <h2 id="team-title">Состав команды</h2>

            <div class="team" id="team-content" style="display: flex;">
                <div class="team-column">
                    <h3>Вратари</h3>
                    <ul>
                        <div class="player">
                            <div class="number">28</div>
                            <div class="name"><a href="player_28.html">Дмитрий Ларин</a></div>
                        </div>
                        <div class="player">
                            <div class="number">49</div>
                            <div class="name"><a href="player_49.html">Бутусов Денис</a></div>
                        </div>
                        <div class="player">
                            <div class="number">88</div>
                            <div class="name"><a href="player_88.html">Стребков Роман</a></div>
                        </div>
                    </ul>
                </div>
                <div class="team-column">
                    <h3>Защитники</h3>
                    <ul>
                        <li>2 Смирнов
                            Дмитрий</li>
                        <li>3 Косово
                            Андрей</li>
                        <li>4 Морозов
                            Игорь</li>
                        <li>5 Вонков
                            Максим</li>
                    </ul>
                </div>
                <div class="team-column">
                    <h3>Полузащитники
                    </h3>
                    <ul>
                        <li>6 Соколов
                            Павел</li>
                        <li>8 Иванов
                            Артем</li>
                        <li>10 Федоров
                            Илья</li>
                        <li>20 Максимов
                            Роман</li>
                    </ul>
                </div>
                <div class="team-column">
                    <h3>Нападающие</h3>
                    <ul>
                        <li>9 Кузнецов
                            Николай</li>
                        <li>11 Полев
                            Владимир
                        </li>
                        <li>19 Федосеев
                            Станислав
                        </li>
                    </ul>
                </div>
            </div>


            <div id="result-container"></div>

            <div class="results" id="results-placeholder"></div>
        </div>

        <div id="top-players-content" style="display: none;">
            <div id="tablegoal" class="tablegoal" style="display: none;">

                <div class="block-wrapper">
                    <div class="statistic goals">
                        <div class="wrapper">
                            <div class="title">Топ бомбардиры</div>
                            <ul class="goals-list"></ul>
                            <div class="link"><a href="pro11x11allstat.html#1">Полный список</a></div>
                        </div>
                    </div>

                    <div class="statistic assists">
                        <div class="wrapper">
                            <div class="title">Топ ассистенты</div>
                            <ul class="assists-list"></ul>
                            <div class="link"><a href="pro11x11allstat.html#2">Полный список</a></div>
                        </div>
                    </div>

                    <div class="statistic goals_assists">
                        <div class="wrapper">
                            <div class="title">Топ гол+пас</div>
                            <ul class="goals-assists-list"></ul>
                            <div class="link"><a href="pro11x11allstat.html#3">Полный список</a></div>
                        </div>
                    </div>
                </div>

                <div class="block-wrapper">
                    <div class="statistic goalkeepers">
                        <div class="wrapper">
                            <div class="title">Вратари</div>
                            <ul class="goalkeepers-list"></ul>
                            <div class="link"><a href="pro11x11allstat.html#4">Полный список</a></div>
                        </div>
                    </div>

                    <div class="statistic goalkeepers_zero">
                        <div class="wrapper">
                            <div class="title">Матчей на ноль</div>
                            <ul class="goalkeepers-list-zero"></ul>
                            <div class="link"><a href="pro11x11allstat.html#5">Полный список</a></div>
                        </div>
                    </div>

                    <div class="statistic zanetti_top">
                        <div class="wrapper">
                            <div class="title">Топ-5 приз Дзанетти</div>
                            <ul class="zanetti_top-list"></ul>
                            <div class="link"><a href="pro11x11allstat.html#6">Полный список</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    </div>
    </div>
    </div>



    @@include('blocks/footer.html')
</body>
<script src=" ./js/index.bundle.js"> </script>
<script src="js/statistics11x11.bundle.js"></script>


<script>function showStats(type, event) {
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => tab.classList.remove('active'));
        if (event) {
            event.currentTarget.classList.add('active');
        }

        const statsContent = document.getElementById('stats-content');
        const teamContent = document.querySelector('.team');
        const resultsContent = document.getElementById('results-content');
        const tableGoal = document.getElementById('tablegoal');
        const topPlayersContent = document.getElementById('top-players-content');

        // Скрываем все секции, только если элемент существует
        if (statsContent) statsContent.style.display = 'none';
        if (teamContent) teamContent.style.display = 'none';
        if (resultsContent) resultsContent.style.display = 'none';
        if (tableGoal) tableGoal.style.display = 'none';
        if (topPlayersContent) topPlayersContent.style.display = 'none';

        if (type === 'stats') {
            if (statsContent) {
                statsContent.style.display = 'block';
                statsContent.innerHTML = `
                <div class="stats">
                    <div class="stat-block"><h3>Матчи</h3><p>28</p></div>
                    <div class="stat-block"><h3>Победы</h3><p>3</p></div>
                    <div class="stat-block"><h3>Ничьи</h3><p>5</p></div>
                    <div class="stat-block"><h3>Поражения</h3><p>3</p></div>
                    <div class="stat-block"><h3>Голы забитые</h3><p>62</p></div>
                    <div class="stat-block"><h3>Голы пропущенные</h3><p>24</p></div>
                    <div class="stat-block"><h3>Разница</h3><p>+38</p></div>
                    <div class="stat-block"><h3>Лучшая серия побед</h3><p>6</p></div>
                    <div class="stat-block"><h3>Серия без поражений</h3><p>9</p></div>
                    <div class="stat-block"><h3>Крупнейшая победа</h3><p>8:0</p></div>
                    <div class="stat-block"><h3>Крупнейшее поражение</h3><p>0:3</p></div>
                </div>`;
            }
        } else if (type === 'results') {
            if (resultsContent) resultsContent.style.display = 'flex';
        } else if (type === 'top_players') {
            if (topPlayersContent) topPlayersContent.style.display = 'block';
            if (tableGoal) tableGoal.style.display = 'block';
        } else {
            if (statsContent) {
                statsContent.style.display = 'block';
                statsContent.innerHTML = `
                <div class="stats" id="default-stats">
                    <div class="stat-block">
                        <h4></h4>
                        <h3></h3>
                        <p></p>
                    </div>
                    <div class="stat-block">
                        <h4></h4>
                        <h3></h3>
                        <p></p>
                    </div>
                    <div class="stat-block">
                        <h4></h4>
                        <h3></h3>
                        <p></p>
                    </div>
                    <div class="stat-block">
                        <h4></h4>
                        <h3></h3>
                        <p></p>
                    </div>
                </div>`;
            }
            if (teamContent) teamContent.style.display = 'flex';
        }
    }

    const limitListItems = (listClass) => {
        const list = document.querySelectorAll(`.${listClass} li`);
        if (!list || list.length === 0) return; // Если список пустой, выходим

        if (list.length > 5) {
            for (let i = 5; i < list.length; i++) {
                list[i].style.display = 'none';
            }
        }
    };

    window.onload = function () {
        showStats('default');

        limitListItems('goals-list');
        limitListItems('assists-list');
        limitListItems('goals-assists-list');
        limitListItems('goalkeepers-list');
        limitListItems('goalkeepers-list-zero');
        limitListItems('zanetti_top-list');
    };



</script>

<script>
    // Функция склонения русских слов по числу (гол, гола, голов)
    function declOfNum(number, titles) {
        number = Math.abs(number) % 100;
        let n1 = number % 10;
        if (number > 10 && number < 20) return titles[2];
        if (n1 > 1 && n1 < 5) return titles[1];
        if (n1 === 1) return titles[0];
        return titles[2];
    }

    function updateBestPlayersFromLists() {
        // Получаем первого игрока из списка, убирая номер и учитывая формат
        function getFirstPlayerInfo(listClass) {
            const ul = document.querySelector(`#tablegoal .${listClass}`);
            if (!ul) return null;
            const firstLi = ul.querySelector('li');
            if (!firstLi) return null;

            // Формат li: "1. Фамилия Имя — 18" или "1. Фамилия Имя 18"
            // Уберем номер в начале
            let text = firstLi.textContent.trim();

            // Удаляем номер с точкой (например "1. ")
            text = text.replace(/^\d+\.\s*/, '');

            // Разделим по тире или дефису на имя и счетчик
            let name = '', counter = '';
            let parts = text.split(/[-—]/);
            if (parts.length === 2) {
                name = parts[0].trim();
                counter = parts[1].trim();
            } else {
                // Если тире нет, пытаемся разделить по пробелам, где последнее число — счетчик
                let splitParts = text.split(' ');
                counter = splitParts.pop();
                name = splitParts.join(' ');
            }

            // Число в counter может быть с лишними символами, оставим только цифры
            counter = counter.match(/\d+/) ? counter.match(/\d+/)[0] : counter;

            return { name, counter: Number(counter) };
        }

        // Обновляем блок с бомбардирами
        const bestScorer = getFirstPlayerInfo('goals-list');
        if (bestScorer) {
            document.querySelector('.best-scorer h3').textContent = bestScorer.name;
            document.querySelector('.best-scorer p').textContent = `${bestScorer.counter} ${declOfNum(bestScorer.counter, ['гол', 'гола', 'голов'])}`;
        }

        // Обновляем блок с ассистентами
        const bestAssist = getFirstPlayerInfo('assists-list');
        if (bestAssist) {
            document.querySelector('.best-assist h3').textContent = bestAssist.name;
            document.querySelector('.best-assist p').textContent = `${bestAssist.counter} ${declOfNum(bestAssist.counter, ['передача', 'передачи', 'передач'])}`;
        }

        // Обновляем блок с гол+пас (combined)
        const bestCombined = getFirstPlayerInfo('goals-assists-list');
        if (bestCombined) {
            document.querySelector('.best-combined h3').textContent = bestCombined.name;
            document.querySelector('.best-combined p').textContent = `${bestCombined.counter} ${declOfNum(bestCombined.counter, ['очко', 'очка', 'очков'])}`;
        }

        // Обновляем блок с сухими матчами (вратари)
        const bestGoalkeeperZero = getFirstPlayerInfo('goalkeepers-list-zero');
        if (bestGoalkeeperZero) {
            document.querySelector('.best-goalkeeper h3').textContent = bestGoalkeeperZero.name;
            document.querySelector('.best-goalkeeper p').textContent = `${bestGoalkeeperZero.counter} ${declOfNum(bestGoalkeeperZero.counter, ['матч', 'матча', 'матчей'])}`;
        }
    }

    // Запускаем после загрузки страницы и после того, как список заполнится
    window.onload = () => {
        updateBestPlayersFromLists();
    };

</script>

</body>

</html>